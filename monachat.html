monachat.pm documentation
<br><br>
Methods exported by this module<br>
--------------------------------<br>
- Constructor<br>
    - new<br><br>

- Basic getters/setters<br>
    - name / id / character / status / trip / ihash / r / g / b / x / y / scl<br><br>

- Configuration getters/setters<br>
     - addr / port / attrib / server / room / proxy / site / timeout / debug / version<br><br>

- Utility functions<br>
    - send<br>
    - change_(name/character/trip/rgb/x/y/scl/x_y_scl)<br>
    - relogin / change_room / reenter / can_read / data / rgb / x_y_scl<br><br>

- Network functions<br>
    - connect / connect_proxy / disconnect / enter_room<br>
    - is_down / is_connected / can_ping / ping / read_socket<br><br>

- Signals<br>
    - login / exit_room / comment / change_status / ignore<br><br>

- Proxy functions<br>
    - proxies_left / next_proxy / get_proxy_list<br><br><br>


<h1>CONSTRUCTOR</h1><br><br>

new([%data]):<br>
It accepts a hash of data as an initialization of session data, which may contain:<br><br>

name   - Session name<br>
char   - Character type<br>
status - Initial status<br>
trip   - Initial trip<br>
r      - Initial r<br>
g      - Initial g<br>
b      - Initial b<br>
x      - Initial x position<br>
y      - Initial y position<br>
scl    - Initial scl position<br><br>

addr   - Socket address<br>
port   - Socket port<br><br>

server - Monachat server to connect to, which is one of the following:<br>
iriguchi, ooheya, chibichato, moa, chiikibetsu, wadaibetsu, tateyokoheya, cool, kanpu, monafp<br><br>

room   - Monachat server room<br>
proxy  - 1 or 0<br>
site   - 1 or 2, 2 contains a much lager list but 1 is faster (probably)<br>
to     - Timeout between reconnection tries or proxy timeout<br>
debug  - Show proxy debug information (1 or 0)<br>
socks  - Socks version (3 or 4)<br><br>

handle_name    - Wether to cut the name down to 40 characters if it's longer thatn that (0 or 1).<br>
handle_stat    - Same as name, but with status.<br>
handle_comment - Same, but with comments.<br>
handle_ihash   - Wether to cut down ihashes to the last 6 chars or not (0 or 1).<br><br><br>


<h1>GETTERS/SETTERS</h1><br><br>

name / id / character / status / trip / ihash / r / g / b / x / y / scl<br>
addr / port / attrib / server / room / proxy / site / timeout / debug / version<br><br>

Set value if there is one, return value if there isn't, usually used internally.<br><br><br>


<h1>UTILITY FUNCTIONS</h1><br><br>

send($data):<br>
Sends raw data to socket with \0 termination and encoded in utf8.<br><br>

change_name($name):<br>
change_character($character):<br>
change_trip($trip):<br>
change_rgb($r, $g, $b):<br>
change_x($y):<br>
change_($y):<br>
change_scl($scl):<br>
change_x_y_scl($x, $y, $scl):<br>
Changes value and relogins if there is need to do so.<br><br>

relogin():<br>
Relogins to monachat and reenters current room.<br><br>

change_room($room):<br>
Exit current room and changes it.<br><br>

reenter():<br>
Exits current room and enter it again.<br><br>

can_read($t):<br>
Waits $t seconds and returns data if there is data stored in socket buffer or undef on fail.<br><br>

rgb($r, $g, $b):<br>
Set rgb values.<br><br>

x_y_scl($x, $y, $scl):<br>
Set x y and scl values.<br><br>

can_read($t):<br>
Interface to $select->can_read($t). Takes timeout and returns 1 on success or undef otherwise.<br><br>

data(%data):<br>
Bulk data getter/setter, note that you can't set id and ihash with setter:<br>
- Setter data: <br>
- Getter data: <br><br>

rgb($r, $g, $b):<br>
Utility function for r(), g() and b()<br><br>

x_y_scl():<br>
Utility function to x(), y() and scl()<br><br><br>


<h1>NETWORK FUNCTIONS</h1><br><br>

connect():<br>
Open a IO::Socket::INET socket to monachat and send a login signal<br><br>

disconnect():<br>
Stop reading and writing from socket and close it<br><br>

can_ping():<br>
Check if enough time has passed so that a ping signal can be sent. Returns 1 on success and undef on failure.<br><br>

read_socket([$t], [$c],):<br>
Read from socket with a timeout of $t seconds and a character limit of $c characters.<br><br>

proxies_left():<br>
Get number of proxies left on proxy array.<br><br>

get_proxy_list() - Download new proxy list.
